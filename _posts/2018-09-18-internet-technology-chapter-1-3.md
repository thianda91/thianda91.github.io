---
layout:       article
title:        互联网技术 第一、二、三章
key:          2018-09-18
tags:         internet
categories:   internet
date:         2018-09-18 22:50:13 +08:00:00
modify_date:  2018-09-19 03:07:10
---

《互联网技术》教材 内容节选

<!--more-->

## 第1章 计算机网络与协议

### 1.1 计算机网络功能

**基本功能**

硬件共享、软件和信息共享、数据传输、集中管理、分布式处理、负载均衡等

### 1.2 计算机网络的组成和分类

3 部分组成：资源子网、通信子网、网络协议

**分类**

1. 根据覆盖范围：

广域网、局域网、城域网、个人区域网。

2. 按照网络交换方式划分：

**电路交换**。通信开始前先建立链路，结束后释放链路。通信过程中用户独享信道。保证了用户的带宽，时延较短，利用率不高。

**分组交换**。分组是指包含用户数据和协议头的块，一条消息可能被划分为多个分组，分别独立传输，并且可能沿不同的路由到达目的地。同一条信息的分组都到达了目的地，就可以重装形成原始信息。这个过程称为分组交换。

分组交换的两种方式：虚电路交换、数据报交换。

**虚电路交换**是一种面向连接的交换技术，在数据传输之前，双方须通过中间交换节点建立逻辑电路连接，虽然独占使用，但它却采用了一种类似信道复用的技术，通过分组存储与转发的原理，单节点可建立多条虚电路，同时服务多个通信过程。

**数据报交换**采用数据报方式，每个分组头部都包含了分组的目的地信息。中间节点根据头部确定路由。每个分组的路由可能不同，抵达节点时的顺序与发送的可能不同。

分组交换优势：通信线路非独占。适用于突发数据的传输，能抵御传输中的时延和抖动。

电路交换优点：传输快速，按需到达，速率恒定。适用于实时数据传输过程。

TCP / IP、X.25 及帧中继等，都是基于分组交换技术。互联网就是一种分组交换网络。

### 1.3 计算机网络的体系结构

基本思想是分层次设计，包含：同层进程通信的协议，以及相邻层之间的接口及服务。

分层可以将负责的问题分解为若干较为简明且有利于处理的问题。第 N 层是第 N-1 层的用户，又是第 N+1 层的服务提供者。

网络协议的 3 个要素：语义（Semantics）、语法（Syntax）、同步（Synchronization）。

### 1.4 计算机网络分层模型

国际标准组织 （International Standardardization Organization，ISO） 定制了 开放系统互联参考模型 OSI/RM 和 传输控制协议/网际协议 TCP / IP参考模型。

`Open System Interconnect Reference Model`和`Transfer Control Protocol / Internet Protocol`

| OSI | 进程|||
|-|-|-|-|
|7| 应用层|文件服务、数据库服务、电子邮件等||
|6| 表示层|协议转换、数据翻译、压缩与解压缩、字符转换、图形命令解释||
|5| 会话层|负责两个会话层实体之间对话连接的建立和拆除|执行了用户权限识别|
|4| 传输层|提供可靠的端到端服务|分流技术、复用技术、差错检测与恢复、流量控制|
|3| 网络层| 建立逻辑链路进行分组传输以实现互联互通                       ||
|2| 数据链路层|介质访问控制（Media Access Control）、逻辑链路控制（Logical Link Control）||
|1| 物理层|机械特性、电气特性、功能特性、规程特性|光纤、同轴电缆、双肩县、红外线|

OSI 理论比较系统、全面，对具体实施有一定的指导意义，但是完整的实现 OSI / RM 所规定的所有功能很难。 TCP / IP 参考模型则是在实践中逐步发展而来的。

```
| TCP / IP  | 对应 OSI  |
| --------- | -------- |
| 应用层     | 5、6、7   |
| 传输层     | 4        |
| 网络层     | 3        |
| 网络接口层  | 1、2     |
```

协议简介
| 进程|||
|-|-|-|
| 应用层|||
| 表示层|                                                              ||
| 会话层|||
| 传输层|A类：具有可接受的差错率和故障率，一般指虚电路。<br />B类：具有可接受的差错率和不可接受的故障率。广域网<br />C类：具有不可接受的差错率，服务质量最差。数据报服务或无线分组交换|TCP、UDP|
| 网络层| X.25、IPX / SPX、IP、ICMP、IGMP、RIP、OSPF、BGP ||
| 数据链路层|分类：局域网数据链路协议、面向字符的数据链路控制规程、面向比特性的数据链路控制规程<br />载波监听多路访问、冲突检测（Carrier Sense Multiple Access with Collision Detection，CSMA/CD）|SLIP、PPP、ARP、RARP|
| 物理层|RS-121C、RS-499、V.35、X.21、X.21bis|光纤、同轴电缆、双肩县、红外线|

## 第2章 局域网

## 第3章 互联网

### 3.1 网络互联设备

### 3.2 internet 协议

IP 协议。IP 首部，最长 60 字节，去掉 20 个固定的字节，选项最长 40 字节。IP地址，IPv4 32位，分为 A、B、C、D、E 五类。

```
A   0      网络   主机   从 1.0.0.0
B   10     网络   主机   从 128.0.0.0
C   110    网络   主机   从 192.0.0.0
D   1110   广播地址      从 224.0.0.0
E   1111   保留         从 240.0.0.0
```

ICMP 协议，Internet Control Message Protocol，网际控制信息协议。当一个分组不可达或 TTL 超时，则路由器丢弃此分组并返回目的主机不可达的 ICMP 报文。无专用的数据报格式，他的首部使用了 IP 的首部。`ping`命令使用的就是 ICMP。

ARP 和 RARP。

### 3.3 IPv6

可参考我的[另一篇文章](../mdcn/ipv6.html)

### 3.4 Internet 路由协议

#### 3.4.1 RIP 协议

路由信息协议（Routing Information Protocol）。依靠物理网络的广播功能来迅速交换选路信息。

基于本地网的矢量距离选路算法的直接而简单的实现。

#### 3.4.2 OSPF 协议

一种典型的链路状态（Link-State）路由协议。一般用于同一路由域（一个自治系统，Autonomous System，AS）内。这里有一篇[旧文章](../mdcn/ospf.html)。

**OSPF 路由器分类**：

内部路由器（IR）、所有直连链路处于同一区域

区域边界路由器（BR）、与多个区域相连

AS 边界路由器（ASBR）、与 AS 外部的路由器相互交换路由信息

指定路由器（Designated Router，DR）、在一个广播性的多接入的网络，存在一个指定路由器，在OSPF协议中完成如下工作。（1）产生用于描述所处的网段的链路数据包--Network Link。（2）与所有与其处于同一网段上的 OSPF 路由器建立相邻关系。可以说 DR 处于一个网段的中心地位。

DR 的选择，是通过 OSPF 的 Hello 数据包完成，初始化过程中，选择 ID（路由器标识）最大的，并选择次大的作为备份指定路由器（Backup DR，BDR）。

将 OSPF 相邻路由器从发送 Hello 数据包，建立数据库同步，至建立完全的 OSPF 交互关系的过程分成几个不同的状态，如下所述。

```
Down
Attempt
Init
2-Way      DR、BDR 选举
Exstart
Exchange   处于 Flood 状态
Loading
Full
```

**域间路由、AS 外部路由、OSPF 路由协议的验证**

#### 3.4.3 BGP 协议

BGP 提供可控制的无循环的路由，它假定自治系统内部的选录已经完成。就 BGP 而言，因特网就是一个 AS 图，每个 AS 用 AS 号码来识别，两个 AS 之间的连接形成一个路径，路径信息汇集成到达特定目的地的路由，BGP 确保无循环域间选路。这里有一篇[旧文章](../mdcn/BGP.html)。

### 3.5 城域网

#### 3.5.1 城域网含义与结构

在城市和郊区范围内，宽带 IP 城域网 是宽带骨干网络在城市范围的延伸，是在城市范围内，以 IP 技术为基础，以光纤作为传输介质，承载数据、语音、视频等多媒体业务，为用户提供高带宽、多功能、多业务接入的多媒体通信网络。能满足政府机关、企事业单位、个人用户对基于 IP 的各种多媒体业务的需求，特别是日益增长的互联网用户高速上网的需求。

组成：城域网骨干网和城域接入网。骨干网包括核心层、业务接入控制层（Broadband Network Gate，BNG）和汇聚层。城域接入网实现接入层，提供最终用户的接入。

**核心层**。数据快速转发，整个城域网路由表维护，实现与 IP 广域骨干网的互连，一般选用高速路由器。

**业务接入控制层**。用户接入认证控制、QoS 策略控制和计费统计。

BNG 相关功能可由一台设备完成，也可设置为业务路由器（Service Router，SR）、宽带接入服务器（Broadband Remote Access Server，BRAS）。多业务边缘路由器（Mutiple Service Edge，MSE）。

**汇聚层**。数据收敛转发，汇聚接入层。城域网汇聚层和区域汇聚层。3层交换机，总级不超两级。

**接入层**。用户就近接入。

#### 3.5.2 路由及传输技术

协议：域间路由协议 BGP-4。IGP 采用动态路由协议 OSPF 或 IS-IS。

传输技术：骨干 OTN，通过路由器的 POS、以太网端口经光纤直连。核心层 PTN、OTN。汇聚层 SDH / MSTP、PTN、OTN、光纤直连。

#### 3.5.3 认证技术

AAA 和 RADIUS 协议、PPPoE、DHCP+认证技术、802.1x接入认证技术。

#### 3.5.4 城域网管理

功能：配置管理、告警及故障管理、性能管理、安全管理

管理方式：带内网络管理、带外网络管理。